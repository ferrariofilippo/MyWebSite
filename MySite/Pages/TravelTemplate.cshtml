@page
@model MySite.Pages.TravelTemplateModel
@{
    await Model.WaitData();
    var country = (MySite.Models.Travel?)ViewData["Travel"];
    var places = (MySite.Models.SuggestedPlace[]?)ViewData["Places"];

    string CarouselContent()
    {
        if (country is null || country.Pictures is null) return "";

        System.Text.StringBuilder sb = new System.Text.StringBuilder(
            "<ol class=\"carousel-indicators\"><li class=\"active\" " +
            "data-target=\"#pictures\" data-slide-to=\"0\"></li>");
        for (int i = 1; i < country.Pictures.Count; i++)
        {
            sb.Append($"<li> target=\"#pictures\" data-slide-to=\"{i}\"</li>");
        }
        sb.Append("</ol><div class=\"carousel-inner\">");
        sb.Append("<div class=\"item active\"><img src=\"data:image/png;" +
                  $"base64,{Convert.ToBase64String(country.Pictures[0].Image)}" +
                  "\"/></div>");
        for (int i = 1; i < country.Pictures.Count; i++)
        {
            sb.Append("<div class=\"item\"><img src=\"data:image/png;" +
                      $"base64,{Convert.ToBase64String(country.Pictures[i].Image)}" +
                      "\"/></div>");
        }
        sb.Append("</div>");

        return sb.ToString();
    }
}

<div style="background-image: src('data:image/png;base64,
    @Convert.ToBase64String(@country != null
        ? @country.BackgroundImage : new byte[1])')">
    <h1 style="text-align: center">@country?.Country</h1>
</div>
<div class="main-section">
    <br /><br />
    <p>
        @Html.Raw(@country?.Description)
    </p>
    <br /><br />
    <div class="carousel slide" data-ride="carousel" id="pictures">
        @Html.Raw(@CarouselContent())

        <a class="carousel-control-prev" href="#pictures" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#pictures" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <br /><br />
    <h4>My top 5:</h4>
    <ul>
        <li><a class="link-txt link" href=@places?[0]?.Url>@places?[0]?.Name</a></li>
        <li><a class="link-txt link" href=@places?[0]?.Url>@places?[1]?.Name</a></li>
        <li><a class="link-txt link" href=@places?[0]?.Url>@places?[2]?.Name</a></li>
        <li><a class="link-txt link" href=@places?[0]?.Url>@places?[3]?.Name</a></li>
        <li><a class="link-txt link" href=@places?[0]?.Url>@places?[4]?.Name</a></li>
    </ul>
</div>